---
layout: post
title: Настройка и установка Samba в Ubuntu для доступа из OS X
excerpt_separator: <!--more-->
---

### Ликбез

*Samba* — пакет программ, которые позволяют обращаться к сетевым дискам и принтерам на различных операционных системах по протоколу SMB/CIFS. 
Имеет клиентскую и серверную части. Является свободным программным обеспечением, выпущена под лицензией GPL.

Samba работает на большинстве Unix-подобных систем, таких как GNU/Linux, POSIX-совместимых Solaris и Mac OS X Server, на различных вариантах BSD, 
в OS/2, Windows. Samba включена практически во все дистрибутивы GNU/Linux, в том числе, конечно, и в Ubuntu.

<!--more-->

### Установка

Установка пакетов:

```
$ apt-get install libcups2 samba samba-common
```

Если какие-то пакеты не были установлены, они доустановятся. После проверяем, что все поднялось:

```
$ service smbd status
```

Кстати, после каждого чиха(изменения конфигурации, добавление пользователя) надо делать рестарт сервиса:

```
$ service smbd restart
```

### Настройка

Открываем файл конфигурации:

```
$ vim /etc/samba/smb.conf
```

В него можно дописать следующее:

```
[global]
log file = /var/log/samba-log.%m
lock directory = /var/lock/samba
share modes = yes

[homes]
comment = Home Directories
browseable = no
read only = no
create mode = 0750

[tmp]
comment = tmp
path = /tmp
read only = no
public = yes
```

Сейчас не забываем сделать:

```
$ service smbd restart
```

Чтобы создать директорию для публичного доступа, надо добавить что-то такое:

```
[public]
comment = Public Stuff
path = /home/public
public = yes
writable = yes
printable = no
```

#### Разбираемся с пользователями

Samba использует пользователей которые уже есть в системе, возьмем для примера имя _user_, 
допустим что он уже есть в системе, надо внести его в базу данных SMB и назначить пароль для доступа к общим ресурсам, сделаем это командой:

```
$ smbpasswd -a user
```

Включаем этого пользователя:

```
$ smbpasswd -e user
```

Далее создадим псевдоним для имени пользователя user. Открываем:

```
$ vim /etc/samba/smbusers
```

И добавляем строчки для каждого созданного пользователя через "smbpasswd -a user", согласно следующему паттерну:

```
<username> = “<username>”
```

где слева имя учетки в Ubuntu, а справа имя учетки Samba.(Да кавычки обязательно)

И снова:

```
$ service smbd restart
```

### Подключение из OS X

Открываем Finder -> Подключение к серверу... . Далее вводим:

```
smb://<ip_address>
```

Вводим алиас, установленный для Samba в Ubuntu и пароль заданный при создании пользователя Samba. Радуемся!

Пока все, спасибо!
